---
import BaseLayout from '../layouts/BaseLayout.astro';
import CompanyCarousel from '../components/CompanyCarousel.astro';
import HeroMedia from '../components/HeroMedia.astro';
import { heroAssets, investmentAssets } from '../data/assets';
import { getDetailPath, getEntityDetails, type EntityDetail } from '../data/entityDetails';
import { getExploitPath } from '../data/exploitDetails';

const pageTitle = 'Home';
const pageDescription =
  'Technology investor, CEO, philanthropist, and longtime operator Don Listwin shares his work across leadership, investing, and philanthropy.';

const carbonRoboticsDetailPath = getDetailPath('carbon-robotics');
const carbonRoboticsAsset = investmentAssets
  .flatMap((group) => group.items)
  .find((asset) => asset.id === 'carbon-robotics');
const portrait = heroAssets.find((asset) => asset.id === 'don-listwin');
const entityDetails = getEntityDetails();
const entityDetailMap = new Map<string, EntityDetail>(entityDetails.map((detail) => [detail.slug, detail]));
const investmentCarousels = investmentAssets.map((group) => ({
  label: group.label,
  items: group.items
    .map((asset) => entityDetailMap.get(asset.id))
    .filter((detail): detail is EntityDetail => Boolean(detail)),
}));

const linkTargets = {
  openwave: getDetailPath('openwave'),
  rapidai: getDetailPath('rapidai'),
  calix: getDetailPath('calix'),
  canary: getDetailPath('canary-foundation'),
  sequoia: getDetailPath('sequoia'),
  rally: getDetailPath('rally'),
  belizekids: getDetailPath('belizekids'),
  stanford: getDetailPath('stanford'),
  canaryChallenge: getDetailPath('canary-challenge'),
};

const cardMedia: Record<
  string,
  {
    path: string;
    alt: string;
  }
> = {
  netaid: {
    path: '/assets/uploads/2020/09/netaid-768x598.jpg',
    alt: 'NetAid concert with performers raising funds for anti-poverty initiatives',
  },
  sjgp: {
    path: '/assets/uploads/2020/09/sjgp-768x576.jpg',
    alt: 'Champ cars racing through downtown San Jose streets during the Grand Prix',
  },
  'canary-foundation': {
    path: '/assets/uploads/2020/10/canary-foundation.jpg',
    alt: 'Canary Foundation researchers collaborating inside the lab',
  },
  'canary-center': {
    path: '/assets/uploads/2020/09/canary-center-768x457.jpg',
    alt: 'Exterior of the Canary Center at Stanford with modern glass architecture',
  },
  'canary-challenge': {
    path: '/assets/uploads/2020/09/canary-challenge-768x608.jpg',
    alt: 'Cyclists riding in the Canary Challenge charity event',
  },
  'cancer-conference': {
    path: '/assets/uploads/2020/09/cancer-conference-768x662.jpg',
    alt: 'Early Detection of Cancer Conference audience and speaker session',
  },
  'vision-clinic': {
    path: '/assets/uploads/2020/09/vision-clinic-768x685.jpg',
    alt: 'Doctors providing eye exams at the Belize vision clinic',
  },
  catholic: {
    path: '/assets/uploads/2020/09/catholic-768x653.jpg',
    alt: 'Students outside San Pedro Roman Catholic Primary School',
  },
  adventist: {
    path: '/assets/uploads/2020/09/adventist-768x526.jpg',
    alt: 'Students gathered near New Horizon SDA Primary School upgrades',
  },
  'hol-chan': {
    path: '/assets/uploads/2020/09/hol-chan-768x606.jpg',
    alt: 'Hol Chan Marine Reserve waters and tour boats near the reef',
  },
  'community-relief': {
    path: '/assets/uploads/2020/09/dolla-dive-768x576.jpg',
    alt: "Volunteers organizing the Dolla' a Dive and COVID food drive supplies",
  },
  boca: {
    path: '/assets/uploads/2020/09/boca-768x545.jpg',
    alt: 'Families enjoying the renovated Boca Del Rio Park playground',
  },
  'canary-cove': {
    path: '/assets/uploads/2020/12/caaray-cove-01-768x511.jpg',
    alt: 'Canary Cove beachfront villas and dock on Ambergris Caye',
  },
  railroad: {
    path: '/assets/uploads/2020/12/railroad-768x576.jpg',
    alt: 'Chelsea & Woodside backyard railroad with Don Listwin driving the train',
  },
};

const exploitThemes = [
  {
    kicker: 'BIG EVENTS',
    heading: 'Creating Awareness and Driving Impact',
    description: null,
    cards: [
      {
        title: 'NetAid',
        description:
          'NETAID was an anti-poverty initiative co-founded by the United Nations Development Programme and Cisco Systems with a 1999 concert and simultaneous digital events spanning 40+ countries.',
        tag: 'netaid',
        link: getExploitPath('netaid'),
      },
      {
        title: 'San Jose Grand Prix',
        description:
          'SAN JOSE GRAND PRIX brought Champ Car racing to Silicon Valley, amplifying Canary Foundation’s mission and the importance of early cancer detection.',
        tag: 'sjgp',
        link: getExploitPath('san-jose-grand-prix'),
      },
    ],
  },
  {
    kicker: 'BIG IDEA',
    heading: 'Advancing Early Cancer Detection',
    description: null,
    cards: [
      {
        title: 'Canary Foundation',
        description:
          'Founded in 2004 as the world’s first nonprofit solely dedicated to funding, discovering, and developing tests for early cancer detection.',
        tag: 'canary-foundation',
        link: linkTargets.canary,
      },
      {
        title: 'Canary Center at Stanford',
        description:
          'A world-class research facility focused on minimally invasive diagnostics and imaging strategies for detecting cancers at curable stages.',
        tag: 'canary-center',
        link: linkTargets.stanford,
      },
      {
        title: 'Canary Challenge',
        description:
          'An annual fully supported bike ride whose proceeds benefited the Stanford Cancer Institute and Canary Center to advance cancer research and supportive care.',
        tag: 'canary-challenge',
        link: linkTargets.canaryChallenge,
      },
      {
        title: 'Early Detection of Cancer Conference',
        description:
          'A cross-disciplinary conference series investing in early detection research, screening accuracy, and the biology of early-stage cancers.',
        tag: 'cancer-conference',
        link: getExploitPath('cancer-conference'),
      },
    ],
  },
  {
    kicker: 'BIG LOVE',
    heading: 'Helping Communities in Belize',
    description: null,
    cards: [
      {
        title: 'Belize Vision Clinic',
        description:
          'Partnering with BCVI and Stanford Medicine, this clinic provides comprehensive eye care for San Pedro residents through BelizeKids.org.',
        tag: 'vision-clinic',
        link: linkTargets.belizekids,
      },
      {
        title: 'San Pedro Roman Catholic Primary School',
        description:
          'Expanded with new classrooms, electrical upgrades, and refreshed facilities to support 700+ students.',
        tag: 'catholic',
        link: linkTargets.belizekids,
      },
      {
        title: 'New Horizon SDA Primary School',
        description:
          'Added classrooms, shaded palapa space, and infrastructure repairs to serve more than 500 students.',
        tag: 'adventist',
        link: linkTargets.belizekids,
      },
      {
        title: 'Hol Chan Marine Reserve + SP Tour Guide Association',
        description:
          'Created “no-take” zones, installed mooring buoys, and supported sustainable tourism to protect Belize’s reef.',
        tag: 'hol-chan',
        link: getExploitPath('hol-chan'),
      },
      {
        title: 'Dolla’ a Dive & COVID Food Drive',
        description:
          'Grassroots campaigns with local dive shops and guides raising funds for healthcare and families during tourism shutdowns.',
        tag: 'community-relief',
        link: getExploitPath('community-relief'),
      },
      {
        title: 'Boca Del Rio Park Playground',
        description:
          'Renovated beachfront park with palapas, playground equipment, and sports upgrades for families.',
        tag: 'boca',
        link: getExploitPath('boca-del-rio-park'),
      },
    ],
  },
  {
    kicker: 'BIG FUN',
    heading: 'Creating Delight',
    description: null,
    cards: [
      {
        title: 'Canary Cove',
        description:
          'A private resort on Ambergris Caye bringing family, friends, and business teams together in Belize.',
        tag: 'canary-cove',
        link: getExploitPath('canary-cove'),
      },
      {
        title: 'Chelsea & Woodside Railroad',
        description:
          'A backyard railroad experience complete with Don as train conductor to delight kids of all ages.',
        tag: 'railroad',
        link: getExploitPath('chelsea-woodside-railroad'),
      },
    ],
  },
];

---

<BaseLayout title={pageTitle} description={pageDescription}>
  <section data-reveal class="space-y-6 rounded-apple bg-white/95 p-6 text-center shadow-panel ring-1 ring-white/60 sm:p-10">
    <p class="mx-auto flex items-center justify-center text-[0.6rem] font-semibold uppercase tracking-[0.4em] text-ink/50 sm:text-xs">
      <span class="sr-only">Roles:</span>
      <span class="typing-line">
        <span id="hero-typing" class="text-[0.78rem] text-ink/70 sm:text-sm"></span>
        <span class="inline-block h-3 w-[2px] animate-pulse bg-brand align-middle sm:h-4" aria-hidden="true"></span>
      </span>
    </p>
    <h1 class="font-display text-4xl font-semibold text-ink sm:text-5xl">Don Listwin</h1>
    <p class="text-ink/70">
      Building enduring companies across networking, data, and health while backing founders who pair engineering rigor with human impact.
    </p>
    <div
      data-reveal
      class="space-y-3 rounded-[32px] border border-ink/10 px-6 py-5 text-center text-white shadow-panel"
      style="background-image: linear-gradient(135deg, rgba(3, 7, 18, 0.75), rgba(30, 64, 175, 0.65)),
        url('https://res.cloudinary.com/dhqpqfw6w/image/upload/v1762633738/LaserWeeder-G2-600-Sunset_qghpi1.webp'); background-size: cover; background-position: center;"
    >
      <p class="text-xs font-semibold uppercase tracking-[0.4em] text-white/70">New investment</p>
      <p class="text-lg font-semibold text-white">Carbon Robotics</p>
      <a
        class="inline-flex items-center justify-center rounded-full bg-white/90 px-6 py-3 text-sm font-semibold text-ink transition hover:bg-white"
        href={carbonRoboticsDetailPath ?? '#'}
      >
        Learn more
      </a>
    </div>
  </section>

  <section id="my-story" data-reveal class="space-y-6">
    <div class="rounded-apple bg-white/95 p-6 shadow-panel ring-1 ring-white/60 sm:p-10">
      <div class="grid gap-6 lg:grid-cols-[1fr_0.8fr] lg:items-center">
        <div class="space-y-4">
          <p class="text-sm font-semibold uppercase tracking-wide text-ink/60">My Story</p>
          <p>
            I have 40+ years in the technology industry. I built a successful tech career at Cisco, and then became the CEO of a
            public company—<a href={linkTargets.openwave}>OpenWave</a>—that created the mobile internet. Since then, I created
            Listwin Ventures which has invested in dozens of other leading technology companies. I founded the
            <a href={linkTargets.canary}>Canary Foundation</a> in 2002—the world's largest research entity to focus on early cancer
            technology. Most recently, I was the CEO of <a href={linkTargets.rapidai}>RapidAI</a>, and I currently serve on six boards
            including as Lead Independent Director at <a href={linkTargets.calix}>Calix</a>. Additionally, I serve as a technology
            partner at <a href={linkTargets.sequoia}>Sequoia Capital</a> and <a href={linkTargets.rally}>Rally Ventures</a>.
          </p>
        </div>
        {portrait && <HeroMedia asset={portrait} showCaption={false} />}
      </div>
    </div>
    <div class="rounded-apple border border-white/80 bg-white/90 p-6 shadow-panel ring-1 ring-white/60 sm:p-10">
      <div class="space-y-4">
        <p>
          With a focus on developing networking and data center technologies for the Internet, I began my career in 1980 at
          Develcon in Canada, marketing data switching technology for the mini-computer era. In the mid-1980s, I relocated to
          Silicon Valley and joined Cisco Systems in 1990. During a 10-year tenure at Cisco, I built the IBM business unit, the
          Access business unit, and the Service Provider line of business—overseeing business totaling more than $12 billion in
          annual revenue. In 2000, I became CEO of <a href={linkTargets.openwave}>Openwave</a>, which invented much of the early
          mobile Internet technology.
        </p>
        <p>
          After 25 years of senior leadership operating experience, I founded the <a href={linkTargets.canary}>Canary Foundation</a>
          in 2002 and dedicated myself to philanthropic work in science and technology for the early detection of cancer. The
          <a href={linkTargets.canary}>Canary Foundation</a> is the world’s first non-profit organization focused solely on the
          funding, discovery, and development of tests for early cancer detection. I continue to be deeply involved with other
          cancer-related organizations. In 2009, I was appointed to the National Cancer Institute’s Board of Scientific Advisors. I
          am a member of the Stanford Advisory Board for the Canary Center for Cancer Early Detection at
          <a href={linkTargets.stanford}>Stanford</a> and in 2018 I was honored to be awarded the Dean's Medal—the highest honor
          bestowed by the School of Medicine to individuals whose contributions have significantly advanced the mission of
          <a href={linkTargets.stanford}>Stanford Medicine</a>. I am also an adjunct professor in Radiology at
          <a href={linkTargets.stanford}>Stanford University</a>.
        </p>
        <p>
          From 2018–2021, I served as CEO of <a href={linkTargets.rapidai}>RapidAI</a>— the worldwide leader in cerebrovascular imaging analysis, delivering the
          proven software tools that healthcare professionals around the world use to successfully identify and treat more stroke
          patients than ever before.
        </p>
        <p>
          I live part-time in Belize where I scuba dive daily and work on restoring and protecting the barrier reef. In 2010, my
          wife and I created the non-profit <a href={linkTargets.belizekids}>BelizeKids.org</a> to support local community and
          education initiatives and have created a partnership with <a href={linkTargets.stanford}>Stanford</a> to deliver eye care
          to the local community.
        </p>
        <p>
          A native of Canada, I hold a B.S. degree in Electrical Engineering and an Honorary Doctorate of Law from the University of
          Saskatchewan, Canada where I continue to actively support student entrepreneurs.
        </p>
        <div class="pt-2">
          <a
            class="inline-flex items-center justify-center rounded-full bg-ink px-6 py-3 text-sm font-semibold text-white transition hover:bg-ink/80"
            href="/oral-history"
          >
            Learn more about Don’s story
          </a>
        </div>
      </div>
    </div>
  </section>

  <section id="recent-work" class="space-y-6 rounded-apple bg-white/95 p-6 shadow-panel ring-1 ring-white/60 sm:p-10">
    <div class="space-y-3">
      <p class="text-sm font-semibold uppercase tracking-wide text-ink/60">Recent work</p>
      <h2 class="text-2xl font-semibold text-ink">Carbon Robotics</h2>
      <p class="text-ink/70">
        Carbon Robotics is revolutionizing agriculture with AI and robotics to reduce costs and increase yields. Amid labor
        challenges, rising input costs, and increasing concerns about herbicide use, growers worldwide are seeking smarter,
        more efficient ways to farm. Carbon Robotics addresses these needs by delivering advanced AI robotic laser weeders and
        tractor autonomy that drives efficiencies to the global community.
      </p>
      <div class="flex flex-col gap-3 sm:flex-row sm:items-center">
        <a class="inline-flex items-center gap-2 text-sm font-semibold text-brand" href={carbonRoboticsDetailPath ?? '#'}>
          Explore the Carbon Robotics detail →
        </a>
        <a
          class="inline-flex items-center justify-center rounded-full bg-brand px-6 py-3 text-sm font-semibold text-white transition hover:bg-brand-soft hover:text-white"
          href="https://www.businesswire.com/news/home/20250602427241/en/Carbon-Robotics-Adds-Lead-Independent-Director-to-Board"
          target="_blank"
          rel="noopener noreferrer"
        >
          Read the press release
        </a>
      </div>
    </div>
    {carbonRoboticsAsset && <HeroMedia asset={carbonRoboticsAsset} rounded={false} linkHref={carbonRoboticsDetailPath} />}
  </section>

  <section id="investments" data-reveal class="space-y-6 rounded-apple bg-gradient-to-br from-fog via-white to-fog p-6 shadow-panel ring-1 ring-white/60 sm:p-10">
    <div class="space-y-4">
      <p class="text-sm font-semibold uppercase tracking-[0.3em] text-ink/60">TECHNOLOGY AND BUSINESS DEVELOPMENT</p>
      <h2 class="text-3xl font-semibold text-ink">For New Technologies</h2>
      <p class="text-lg font-semibold text-ink">My Investments</p>
      <p class="text-ink/70">
        My investments range from seed through sizable stakes in public entities.
      </p>
      <p class="text-ink/70">
        I like helping to solve technology and market development problems. As an engineer and entrepreneur, I think just about
        any problem can be fixed with the right amount of leadership, intellect, and time. I believe in a systematic approach
        that involves many disciplines collaborating to share information and working together around the world to give an edge.
        This is how we do groundbreaking work bringing new products to market.
      </p>
    </div>
    <div class="space-y-8">
      {investmentCarousels.map((group) => (
        <CompanyCarousel title={group.label} items={group.items} />
      ))}
    </div>
  </section>

  <section id="exploits" data-reveal class="space-y-6 rounded-apple bg-gradient-to-br from-fog via-white to-fog p-6 shadow-panel ring-1 ring-white/60 sm:p-10">
    <div class="grid gap-8 lg:grid-cols-[1.2fr]">
      <div class="space-y-4">
        <p class="text-sm font-semibold uppercase tracking-[0.3em] text-ink/60">Exploits</p>
        <h2 class="text-3xl font-semibold text-ink">Community development projects</h2>
        <a
          class="inline-flex items-center justify-center rounded-full bg-ink px-6 py-3 text-sm font-semibold text-white transition hover:bg-ink/80"
          href={linkTargets.belizekids ?? '#'}
        >
          Visit BelizeKids.org
        </a>
      </div>
    </div>
    <div class="space-y-10">
      {exploitThemes.map((theme) => (
        <div class="space-y-4" key={theme.kicker}>
          <div class="space-y-2">
            <p class="text-xs font-semibold uppercase tracking-[0.4em] text-ink/60">{theme.kicker}</p>
            <h3 class="text-xl font-semibold text-ink">{theme.heading}</h3>
          </div>
          <div class="grid gap-4 md:grid-cols-2">
            {theme.cards.map((card, cardIndex) => {
              const media = card.tag ? cardMedia[card.tag] : undefined;
              const buttonHref = card.link ?? '#';
              const buttonDisabled = !card.link;
              return (
                <article
                  data-reveal
                  style={`--reveal-delay:${cardIndex * 80}ms;`}
                  class="group space-y-3 rounded-[28px] border border-white/70 bg-white/90 p-5 text-sm text-ink/75 shadow-panel transition hover:-translate-y-1 hover:border-brand/40 hover:shadow-xl"
                  key={card.title}
                >
                  {media && (
                    <img
                      src={media.path}
                      alt={media.alt}
                      loading="lazy"
                      class="w-full rounded-[24px] border border-white/70"
                    />
                  )}
                  <h4 class="text-lg font-semibold text-ink">{card.title}</h4>
                  <p>{card.description}</p>
                  <a
                    class={`inline-flex items-center justify-center rounded-full border px-4 py-2 text-xs font-semibold uppercase tracking-[0.3em] transition ${
                      buttonDisabled
                        ? 'cursor-not-allowed border-ink/20 text-ink/40'
                        : 'border-ink/30 text-ink group-hover:border-brand group-hover:bg-brand group-hover:text-white'
                    }`}
                    href={buttonDisabled ? '#' : buttonHref}
                    aria-disabled={buttonDisabled}
                    tabindex={buttonDisabled ? -1 : undefined}
                  >
                    Learn more
                  </a>
                </article>
              );
            })}
          </div>
        </div>
      ))}
    </div>
  </section>

</BaseLayout>
