---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getExploitDetails, getExploitDetail, type ExploitDetail } from '../../data/exploitDetails';

export const prerender = true;

export async function getStaticPaths() {
  return getExploitDetails().map((detail) => ({
    params: { slug: detail.slug },
    props: { detail },
  }));
}

const { detail } = Astro.props as { detail: ExploitDetail };
const pageTitle = `${detail.title} â€” Community Project | Listwin Ventures`;
const pageDescription =
  detail.summary && detail.summary.trim().length
    ? detail.summary
    : `${detail.title} community project overview from Listwin Ventures.`;
---

<BaseLayout title={pageTitle} description={pageDescription}>
  <article class="space-y-8 rounded-apple bg-white/95 p-6 shadow-panel ring-1 ring-white/60 sm:p-10">
    <div class="space-y-4 text-center">
      <p class="text-xs font-semibold uppercase tracking-[0.4em] text-ink/50">{detail.category}</p>
      <h1 class="font-display text-3xl font-semibold text-ink sm:text-4xl">{detail.title}</h1>
      <p class="text-ink/70">{pageDescription}</p>
    </div>
    <div class="rounded-[40px] border border-ink/10 bg-white/90 p-3">
      <img
        src={detail.heroImage}
        alt={detail.heroAlt}
        loading="lazy"
        class="w-full rounded-[32px] object-cover"
      />
    </div>
    <div class="space-y-4 text-ink/80">
      {detail.description.map((paragraph) => (
        <p key={paragraph}>{paragraph}</p>
      ))}
    </div>
    {detail.ctaHref && (
      <div class="text-center">
        <a class="btn btn-brand" href={detail.ctaHref} target="_blank" rel="noopener">
          {detail.ctaLabel ?? 'Learn more'}
        </a>
      </div>
    )}
  </article>
</BaseLayout>
